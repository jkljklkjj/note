#### CAP
应用于服务集群的理论
分别指一致性（Consistency）、可用性（Availability）和分区容错性（Partition tolerance）

- 一致性
集群的所有节点的所有数据都保持一致
- 可用性
只要节点被调用，一定会返回结果，无论成功还是失败
- 分区容错性
节点之间如果发生分区，不会造成影响

因为现实中永远无法满足分区容错性，所以无法满足CAP，只能满足CP或AP

CP是牺牲了可用性，在发现不能保证一致性的时候，直接不去返回结果
AP是牺牲了一致性，就算结果不一致，也返回这个不一致的结果

#### BASE
**BASE 理论就是在这种约束下，为了获得高可用性而采取的一种设计哲学**。它是对CAP定理中**AP**（可用性+分区容错性）方案的一种延伸和总结。

**简单来说：BASE 放弃了强一致性（Strong Consistency），转而追求最终一致性（Eventual Consistency），从而获得系统的高可用性。**

**B**asically **A**vailable （基本可用）

**核心：** 分布式系统在出现不可预知的故障时，允许损失部分可用性，但保证核心功能“基本”可用。  
**怎么做的？**

- **流量削峰**：在系统压力过大时，将部分用户引导到降级页面或让其稍后重试，保证大部分用户还能正常使用。
    
- **服务降级**：在系统出现问题时，关闭一些非核心功能（如推荐、头像更换），保证核心功能（如登录、发帖、支付）的可用。
    
- **体验降级**：使用更慢但可用的备用服务，比如从数据库查询降级为从旧的缓存数据查询，响应变慢但不会完全失败。
    
> **举个例子**：双十一期间，淘宝页面可能会提示“服务器繁忙，请稍后再试”，或者图片加载变慢，但你依然可以浏览商品和下单。这就是牺牲了部分可用性（完整体验），保证了基本可用（核心功能）。

**S**oft state （软状态）

**核心：** 允许系统中的数据存在一个“中间状态”，并且这个中间状态的存在不会直接影响系统的整体可用性。这个状态不需要时刻保持一致性，是“软”的、可变的。

- 它承认了数据副本在同步过程中存在**延迟**。
    
- 各个节点的数据副本，在同步完成前，可以暂时不一致。
    
> **举个例子**：你在微博点赞后，你的手机立刻显示了红心（这是软状态），但这个点赞数据可能还没同步到所有数据中心。此时你的朋友可能还看不到这个赞。这个“你已赞而他人未见”的中间阶段，就是软状态。

**E**ventually consistent （最终一致性）

**核心：** 这是BASE的终极目标。它保证在经过一段时间的同步后，所有数据副本最终会达到一致的状态。

- “最终”是一个时间窗口，可能是几毫秒，也可能是几分钟、几小时，取决于系统设计。
    
- 它不需要实时强一致，但保证数据最终是对的。
    
> **举个例子**：继续上面的微博点赞。几秒钟后，数据同步完成，所有用户都能看到这个赞了。系统从“不一致”的软状态，“最终”达到了一致。