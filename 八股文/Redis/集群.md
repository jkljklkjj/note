集群就是把多台Redis服务器变成一台用，从而增加性能、可用性
适用于[[CAP和BASE]]

#### 主从模式
![](https://img2023.cnblogs.com/blog/734446/202304/734446-20230423104604712-958561171.png)
一台服务器作为主服务器，其余作为从服务器
从服务器只负责读，主服务器只负责写
写的时候需要通过[[复制]]进行数据同步

**优点**：

1. 配置简单，易于实现。
2. 实现数据冗余，提高数据可靠性。
3. 读写分离，提高系统性能。

**缺点**：

1. 主节点故障时，需要手动切换到从节点，故障恢复时间较长。
2. 主节点承担所有写操作，可能成为性能瓶颈。
3. 无法实现数据分片，受单节点内存限制。

主从复制模式适用于以下场景：

1. 数据备份和容灾恢复：通过从节点备份主节点的数据，实现数据冗余。
2. 读写分离：将读操作分发到从节点，减轻主节点压力，提高系统性能。
3. 在线升级和扩展：在不影响主节点的情况下，通过增加从节点来扩展系统的读取能力。

总结：主从复制模式适合数据备份、读写分离和在线升级等场景，但在主节点故障时需要手动切换，不能自动实现故障转移。如果对高可用性要求较高，可以考虑使用哨兵模式或Cluster模式。

#### 哨兵模式
![](https://img2023.cnblogs.com/blog/734446/202304/734446-20230423104619091-219085123.png)
在主从模式的基础上加上一个哨兵服务器
会监控主节点，如果主节点宕机，则会重新选举主节点

**优点**：

1. 自动故障转移，提高系统的高可用性。
2. 具有主从复制模式的所有优点，如数据冗余和读写分离。

**缺点**：

1. 配置和管理相对复杂。
2. 依然无法实现数据分片，受单节点内存限制。

哨兵模式适用于以下场景：

1. 高可用性要求较高的场景：通过自动故障转移，确保服务的持续可用。
2. 数据备份和容灾恢复：在主从复制的基础上，提供自动故障转移功能。

总结：哨兵模式在主从复制模式的基础上实现了自动故障转移，提高了系统的高可用性。然而，它仍然无法实现数据分片。如果需要实现数据分片和负载均衡，可以考虑使用Cluster模式。

#### 分片集群
![](https://img2023.cnblogs.com/blog/734446/202304/734446-20230423104631153-1328078427.png)
多个服务器集群，根据key的hash取余，决定数据存放的对应集群

Redis Cluster将数据分为16384个槽位，每个节点负责管理一部分槽位。当客户端向Redis Cluster发送请求时，Cluster会根据键的哈希值将请求路由到相应的节点。具体来说，Redis Cluster使用CRC16算法计算键的哈希值，然后对16384取模，得到槽位编号

**优点**：

1. 数据分片，实现大规模数据存储。
2. 负载均衡，提高系统性能。
3. 自动故障转移，提高高可用性。

**缺点**：

1. 配置和管理较复杂。
2. 一些复杂的多键操作可能受到限制。

Cluster模式适用于以下场景：

1. 大规模数据存储：通过数据分片，突破单节点内存限制。
2. 高性能要求场景：通过负载均衡，提高系统性能。
3. 高可用性要求场景：通过自动故障转移，确保服务的持续可用。

总结：Cluster模式在提供高可用性的同时，实现了数据分片和负载均衡，适用于大规模数据存储和高性能要求的场景。然而，它的配置和管理相对复杂，且某些复杂的多键操作可能受到限制。