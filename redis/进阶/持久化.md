由于redis把数据放进了内存里面，内存相比硬盘，有两个缺点
- 贵，相同的空间要比硬盘贵十几倍
- 关机后清空所有数据
为了解决第二个缺点，我们通过持久化把数据放进硬盘

**RDB**
通过快照来实现，有以下触发条件
：- 根据配置规则进行自动快照；
- 用户执行 SAVE或 BGSAVE命令；
- 执行 FLUSHALL命令；
- 执行复制（replication）时
或者可以手动
```bash
sort key [other...]
```

快照的过程如下：
1. Redis使用fork函数复制一份当前进程（父进程）的副本（子进程）
2. 父进程继续接收并处理客户端发来的命令，而子进程开始将内存中的数据写入硬盘中的临时文件
3. 当子进程写入完所有数据后会用该临时文件替换旧的 RDB文件，至此一次快照操作完成。

**AOF**
通过启用AOF参数来使用
```
appendonly yes
```
AOF通过储存每一次的set命令来保存历史修改
还原的时候就完整执行这些命令